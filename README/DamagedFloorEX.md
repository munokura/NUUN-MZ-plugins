# [床ダメージ拡張](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_DamagedFloorEX.js)
# Ver.1.3.2
[ダウンロード](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_DamagedFloorEX.js)  
#### 必須、前提プラグイン
[共通処理](https://github.com/nuun888/MZ/blob/master/README/Base.md)  

ダメージ床のダメージ時の処理を拡張します。

## 設定方法
### 床のダメージを設定
#### ダメージタイプ
HP、MP、TPのいずれかを指定します。  

#### スリップダメージ
ダメージ床の設定は評価式が使用できます。  
`a`：アクターのゲームデータ  
例  
`Math.max(1,Math.round(a.mhp * 0.01))`　最大HPの1％のダメージを受けます。  

#### 特定の床ダメージ率の指定
特徴を持つメモ欄  
`<DfrEx[tag]:[rate]>` 指定のタグ名の床ダメージ率を指定の整数で記入します。  
`[tag]`:床ダメージタグ名で設定したタグ名  
`[rate]`:効果率  
`<DfrExPoison:150>` タグ名がPoisonの床ダメージの効果率が1.5倍になります。  
`<DfrExPoison:70>` タグ名がPoisonの床ダメージの効果率が0.7倍になります。  

## ダメージ床設定
ダメージ床設定では指定したタイルセットを指定しているマップで適用されます。
### 適用条件
適用できる条件はリージョンIDまたは地形タグから指定できます。  
リージョン設定を0にすることでリージョンを指定していないマップタイルで適用されます。  
リージョンIDまたは地形タグを両方指定している場合はどちらかが一致したときに適用されます。  
リージョン、地形タグを設定した条件は上のほうに設定してください。  
同じマップ内で異なる床ダメージを設定できます。  
例  
リージョン1 毒の沼　10ダメージ　リージョン2 猛毒の沼25ダメージ  
### フラッシュ設定  
フラッシュ設定はフレーム数の数値を0と入力することでフラッシュされません。  
### アニメーション設定  
各アクターの床ダメージ時にアニメーションを再生させます。
プレイヤーのみを選択している場合はプレイヤーのみアニメーションが再生されます。  
フォロワー含むを指定している場合は表示されている床ダメージを受けたフォロワーにアニメーションが再生されます。  

## 更新履歴
2024/8/3 Ver.1.3.2  
未設定のダメージ床を通行したときにエラーが起きる問題を修正。  
2024/6/28 Ver.1.3.1  
床ダメージダメージ時に確率でステートを付与させる機能を追加。  
2024/6/27 Ver.1.3.0  
スリップダメージの対象に別のタイプ(MP、TP)を指定できる機能を追加。  
2024/4/6 Ver.1.2.2  
特定の床ダメージ率を0にしたときに適用されない問題を修正。  
2024/1/6 Ver.1.2.1  
特定の床ダメージに対して効果率を設定できる機能を追加。  
2024/1/4 Ver.1.2.0  
床ダメージ時にアニメーションを再生する機能を追加。  
床ダメージを受けなくても床ダメージ時のSEが再生してしまう問題を修正。  
位相の設定を修正。  
2022/11/14 Ver.1.1.1  
日本語以外での表示を英語表示に変更。  
2022/4/2 Ver.1.1.0  
特定のアクターのみダメージを受ける機能を追加。  
フラッシュの設定方法を変更。  
2021/10/31 Ver.1.0.3  
地形タグ、フラッシュを設定できる機能を追加。  
2021/10/24 Ver.1.0.2  
床ダメージを評価式が使用できるように変更。  
2021/10/24 Ver.1.0.1  
デフォルトの床ダメージ、床ダメージ時のSEを指定できる機能を追加。  
2021/10/24 Ver.1.0.0  
初版  
