# [カウンター拡張](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_CounterEX.js)
# Ver.1.3.1
[ダウンロード](https://raw.githubusercontent.com/nuun888/MZ/master/NUUN_CounterEX.js)

### 必須、前提プラグイン
[共通処理](https://github.com/nuun888/MZ/blob/master/README/Base.md)  

カウンターを拡張します。  

## 設定
### カウンター発動トリガー
常時:条件が一致したときに攻撃時の対象ではなくても反撃(反射)が可能です。  
特技：特技の時に反撃(反射)をします。  
魔法：魔法の時に反撃(反射)をします。  
必中：必中の時に反撃(反射)をします。  
スキル：スキル使用時に反撃(反射)をします。反撃(反射) のスキルトリガーを設定できます。スキルトリガーが設定されていない場合は全てのスキルが対象になります。   
アイテム：アイテム使用時に反撃(反射)をします。反撃(反射) のアイテムトリガーを設定できます。アイテムトリガーが設定されていない場合は全てのアイテムが対象になります。  
※常時を指定してない場合は攻撃された対象のみ反撃対象になります。  
アイテムを使用したときに反撃する場合は常時とアイテムを両方設定してください。  

### カウンタースキル
複数指定の場合は条件に一致したスキルからランダムに一つ発動します。  

### カウンター行動
反撃：攻撃を受けた時に指定のスキルで反撃します。なし指定の場合は通常攻撃で反撃します。  
反射：攻撃を受けた時に受けたスキルで発動者に対し反射します。  
フル反射：攻撃を受けた時に受けたスキルで反射します。全体攻撃で受けた場合は相手に全体攻撃を与えます。  

### 発動タイミング
ターゲット毎：ターゲットにヒットした毎に反撃(反射)します。  
アクション終了後：アクションが終わった時に反撃します。  

### カウンター発動条件
この機能を使うには[NUUN_ConditionsBase(Ver.1.2.0以降)](https://github.com/nuun888/MZ/blob/master/README/ConditionsBase.md)が必要です。  
プラグインパラメータのカウンター発動条件から設定します。  
NUUN_ConditionsBaseのプラグインパラメータのリストIDを指定します。複数指定の場合は,で区切ります。  

### 反撃(反射)の設定
特徴を有するメモ欄  
`<CounterEX:[id]>` カウンターを設定します。  
`[id]`:カウンター設定のリストIDまたはカウンター名  

### 反撃(反射)無効タグ  
スキル、アイテムのメモ欄  
`<[tag]:[rate]>`　カウンターに影響しないスキル、アイテムを設定します。  
`[tag]`:反撃(反射)無効タグで記入したタグ名。  
`[rate]`:無効化する確率。  

### 発動スキルの優先度
#### 特徴参照順
参照した特徴でカウンターが条件一致した場合に実行されます。  
#### プラグインパラメータ順
プラグインパラメータのカウンター設定で上位の設定から条件判定し実行いたします。  

## 更新履歴
2025/5/7 Ver.1.3.1  
味方に対してカウンターを無効化できる機能を追加。  
2025/3/27 Ver.1.3.0  
複数のカウンターが実行可能の場合、発動数を制限する機能を追加。  
複数のカウンターが実行可能の場合、発動優先度を指定する機能を追加。  
2024/7/21 Ver.1.2.1  
カウンタースキルが設定されていない場合、反撃スキルをスキルID1番で反撃するように修正。  
反射が機能していなかった問題を修正。  
2023/8/23 Ver.1.2.0  
特定のスキル、アイテムに反撃する機能を追加。  
2023/7/17 Ver.1.1.4  
死体打ちを行わないように修正。  
2023/7/9 Ver.1.1.3  
カウンター対象のバトラーが戦闘不能になっても攻撃してしまう問題を修正。  
2023/7/3 Ver.1.1.2  
バトルスタイル拡張プラグインでのカウンターの画像切り替え機能で反撃(反射)から元に戻らない問題を修正。  
2023/7/1 Ver.1.1.1  
行動打消しをアクション終了後に反撃(反射)するカウンターには無効化しないように修正。  
2023/7/1 Ver.1.1.0  
カウンターの対象を指定できる機能を追加。  
2023/6/26 Ver.1.0.2  
バトルスタイル拡張、立ち絵、顔グラ表示EXでの立ち絵切り替えに対応。  
2023/6/25 Ver.1.0.1  
条件付きベースのカウンター条件に対応できるように修正。  
必中の反撃が機能していなかった問題を修正。  
2023/6/23 Ver.1.0.0  
初版  
